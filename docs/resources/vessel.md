---
page_title: "gamefabric_vessel Resource - GameFabric"
subcategory: ""
description: |-
  
---

# gamefabric_vessel (Resource)

A Vessel manages a single, unique game server instance with its own identity. Each Vessel represents one specific server that players connect to directly.

Vessels are ideal for game servers that maintain persistent state, have unique identities (often with custom names), or appear in server lists. They're commonly used for dedicated servers where players expect to reconnect to the same specific instance.

For games with persistent state that require persistent storage, please contact your Customer Success Manager to discuss your use case and enable this beta feature.

For details check the <a href="https://docs.gamefabric.com/multiplayer-servers/getting-started/glossary#vessel">GameFabric documentation</a>.


## Example Usage - Simple Vessel

This example sets up a minimal vessel.

```terraform
data "gamefabric_branch" "prod" {
  display_name = "prod"
}

data "gamefabric_image" "gameserver" {
  branch = data.gamefabric_branch.prod.name
  image  = "gameserver"
  tag    = "1.2.3"
}

data "gamefabric_environment" "prod" {
  name = "prod"
}

data "gamefabric_region" "europe" {
  name        = "europe"
  environment = data.gamefabric_environment.prod.name
}

resource "gamefabric_vessel" "this" {
  name        = "my-vessel"
  environment = data.gamefabric_environment.prod.name

  region = data.gamefabric_region.europe.name

  containers = [
    {
      name      = "default" # the game server container should always be named "default"
      image_ref = data.gamefabric_image.gameserver.image_ref
      resources = {
        requests = {
          cpu    = "250m"
          memory = "256Mi"
        }
      }
      envs = [
        {
          name  = "SERVER_NAME"
          value = "My Server ${data.gamefabric_region.europe.display_name}"
        }
      ]
      ports = [
        {
          name           = "game"
          protocol       = "TCP"
          container_port = 27015
          policy         = "Dynamic"
        }
      ]
    }
  ]
}
```

## Advanced Usage

This example demonstrates how to create multiple vessels for different game modes.
It will create 3 vessels for each game mode within europe and configure the game modes and server names via environment variables.

```terraform
data "gamefabric_branch" "prod" {
  display_name = "prod"
}

data "gamefabric_image" "gameserver" {
  branch = data.gamefabric_branch.prod.name
  image  = "gameserver"
  tag    = "1.2.3"
}

data "gamefabric_environment" "prod" {
  name = "prod"
}

data "gamefabric_region" "europe" {
  name        = "europe"
  environment = data.gamefabric_environment.prod.name
}

locals {
  game_modes = {
    survival = {
      display_name = "Survival"
      mode_value   = "survival"
    }
    creative = {
      display_name = "Creative"
      mode_value   = "creative"
    }
    hardcore = {
      display_name = "Hardcore"
      mode_value   = "hardcore"
    }
  }

  # Create multiple vessels per game mode
  vessels = flatten([
    for mode_key, mode in local.game_modes : [
      for i in range(3) : {
        key          = "${mode_key}-${i}"
        mode_key     = mode_key
        display_name = mode.display_name
        mode_value   = mode.mode_value
        index        = i
      }
    ]
  ])
}

resource "gamefabric_vessel" "this" {
  for_each    = { for v in local.vessels : v.key => v }
  name        = "${each.value.mode_key}-${each.value.index}"
  environment = data.gamefabric_environment.prod.name

  region = data.gamefabric_region.europe.name

  containers = [
    {
      name      = "default" # the game server container should always be named "default"
      image_ref = data.gamefabric_image.gameserver.image_ref
      resources = {
        requests = {
          cpu    = "250m"
          memory = "256Mi"
        }
      }
      envs = [
        {
          name  = "SERVER_NAME"
          value = "${each.value.display_name} ${each.value.index + 1} - ${data.gamefabric_region.europe.display_name}"
        },
        {
          name  = "GAME_MODE"
          value = each.value.mode_value
        }
      ]
      ports = [
        {
          name           = "game"
          protocol       = "TCP"
          container_port = 27015
          policy         = "Dynamic"
        }
      ]
    }
  ]
}
```


<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `containers` (Attributes List) Containers is a list of containers belonging to the game server. (see [below for nested schema](#nestedatt--containers))
- `environment` (String) The name of the environment the object belongs to.
- `name` (String) The unique object name within its scope.
- `region` (String) Region defines the region the game servers are distributed to.

### Optional

- `annotations` (Map of String) Annotations is an unstructured map of keys and values stored on an object.
- `description` (String) Description is the optional description of the vessel.
- `gameserver_annotations` (Map of String) Annotations for the game server pods.
- `gameserver_labels` (Map of String) Labels for the game server pods.
- `gateway_policies` (List of String) GatewayPolicies is a list of gateway policies to apply to the Vessel.
- `health_checks` (Attributes) HealthChecks is the health checking configuration for Agones game servers. (see [below for nested schema](#nestedatt--health_checks))
- `labels` (Map of String) A map of keys and values that can be used to organize and categorize objects.
- `profiling_enabled` (Boolean) ProfilingEnabled indicates whether profiling is enabled for the Vessel.
- `suspend` (Boolean) Suspend indicates whether the Vessel should be suspended.
- `termination_configuration` (Attributes) TerminationConfiguration defines the termination grace period for game servers. (see [below for nested schema](#nestedatt--termination_configuration))
- `volumes` (Attributes List) Volumes is a list of volumes that can be mounted by containers belonging to the game server. (see [below for nested schema](#nestedatt--volumes))

### Read-Only

- `id` (String) The unique Terraform identifier.
- `image_updater_target` (Attributes) ImageUpdaterTarget is the reference that an image updater can target to match the Vessel. (see [below for nested schema](#nestedatt--image_updater_target))

<a id="nestedatt--containers"></a>
### Nested Schema for `containers`

Required:

- `image_ref` (Attributes) The reference to the image to run your container with. You should use the `image_ref` attribute of the `gamefabric_image` datasource to configure this attribute. (see [below for nested schema](#nestedatt--containers--image_ref))
- `name` (String) Name is the name of the container. The primary game server container should be named `default`

Optional:

- `args` (List of String) Args are arguments to the entrypoint.
- `command` (List of String) Command is the entrypoint array. This is not executed within a shell.
- `config_files` (Attributes List) ConfigFiles is a list of configuration files to mount into the containers filesystem. (see [below for nested schema](#nestedatt--containers--config_files))
- `envs` (Attributes List) Envs is a list of environment variables to set on all containers in this Armada. (see [below for nested schema](#nestedatt--containers--envs))
- `ports` (Attributes List) Ports are the ports to expose from the container. (see [below for nested schema](#nestedatt--containers--ports))
- `resources` (Attributes) Resources describes the compute resource requirements. See the <a href="https://docs.gamefabric.com/multiplayer-servers/multiplayer-services/resource-management">GameFabric documentation</a> for more details on how to configure resource requests and limits. (see [below for nested schema](#nestedatt--containers--resources))
- `secrets` (Attributes List) Secrets is a list of secrets to mount into the containers filesystem. (see [below for nested schema](#nestedatt--containers--secrets))
- `volume_mounts` (Attributes List) VolumeMounts are the volumes to mount into the container&#39;s filesystem. (see [below for nested schema](#nestedatt--containers--volume_mounts))

<a id="nestedatt--containers--image_ref"></a>
### Nested Schema for `containers.image_ref`

Required:

- `branch` (String) Branch of the GameFabric image.
- `name` (String) Name is the name of the GameFabric image.


<a id="nestedatt--containers--config_files"></a>
### Nested Schema for `containers.config_files`

Required:

- `mount_path` (String) MountPath is the path to mount the configuration file on.
- `name` (String) Name is the name of the configuration file.


<a id="nestedatt--containers--envs"></a>
### Nested Schema for `containers.envs`

Required:

- `name` (String) Name is the name of the environment variable.

Optional:

- `value` (String) Value is the value of the environment variable.
- `value_from` (Attributes) ValueFrom is the source for the environment variable&#39;s value. (see [below for nested schema](#nestedatt--containers--envs--value_from))

<a id="nestedatt--containers--envs--value_from"></a>
### Nested Schema for `containers.envs.value_from`

Optional:

- `config_file` (String) ConfigFile select the configuration file.
- `field_path` (String) FieldPath selects the field of the pod. Supports `metadata.name`, `metadata.namespace`, `metadata.labels['<KEY>']`, `metadata.annotations['<KEY>']`, `metadata.armadaName`, `metadata.regionName`, `metadata.regionTypeName`, `metadata.regionTypePriority`, `metadata.siteName`, `metadata.imageBranch`, `metadata.imageName`, `metadata.imageTag`, `spec.nodeName`, `spec.serviceAccountName`, `status.hostIP`, `status.podIP`, `status.podIPs`.
- `secret` (Attributes) Secret selects the secret. (see [below for nested schema](#nestedatt--containers--envs--value_from--secret))

<a id="nestedatt--containers--envs--value_from--secret"></a>
### Nested Schema for `containers.envs.value_from.secret`

Required:

- `key` (String) Key of the secret.
- `name` (String) Name of the secret.




<a id="nestedatt--containers--ports"></a>
### Nested Schema for `containers.ports`

Required:

- `name` (String) Name is the name of the port. Must contain only lowercase alphanumeric characters, hyphens, or dots. Must start and end with an alphanumeric character. Maximum length is 63 characters.
- `policy` (String) Policy defines how the host port is populated. `Dynamic` (default) allocates a free host port and maps it to the `container_port` (required). The game server must report the external port (obtained via Agones SDK) to backends for client connections. `Passthrough` dynamically allocates a host port and sets `container_port` to match it. The game server must discover this port via Agones SDK and listen on it.

Optional:

- `container_port` (Number) ContainerPort is the port that is being opened on the specified container&#39;s process.
- `protection_protocol` (String) ProtectionProtocol is the optional name of the protection protocol being used.
- `protocol` (String) Protocol is the network protocol being used. Defaults to UDP. TCP is the other option.


<a id="nestedatt--containers--resources"></a>
### Nested Schema for `containers.resources`

Optional:

- `limits` (Attributes) Limits describes the maximum amount of compute resources allowed. (see [below for nested schema](#nestedatt--containers--resources--limits))
- `requests` (Attributes) Requests describes the minimum amount of compute resources required. (see [below for nested schema](#nestedatt--containers--resources--requests))

<a id="nestedatt--containers--resources--limits"></a>
### Nested Schema for `containers.resources.limits`

Optional:

- `cpu` (String) CPU limit.
- `memory` (String) Memory limit.


<a id="nestedatt--containers--resources--requests"></a>
### Nested Schema for `containers.resources.requests`

Optional:

- `cpu` (String) CPU request.
- `memory` (String) Memory request.



<a id="nestedatt--containers--secrets"></a>
### Nested Schema for `containers.secrets`

Required:

- `mount_path` (String) MountPath is the path to mount the secret on.
- `name` (String) Name is the name of the secret.


<a id="nestedatt--containers--volume_mounts"></a>
### Nested Schema for `containers.volume_mounts`

Optional:

- `mount_path` (String) Path within the container at which the volume should be mounted.
- `name` (String) Name is the name of the volume.
- `sub_path` (String) Path within the volume from which the container's volume should be mounted.
- `sub_path_expr` (String) Expanded path within the volume from which the container's volume should be mounted.



<a id="nestedatt--health_checks"></a>
### Nested Schema for `health_checks`

Optional:

- `disabled` (Boolean) Disabled indicates whether Agones health checks are disabled.
- `failure_threshold` (Number) FailureThreshold is the number of consecutive failures before the game server is marked unhealthy and terminated.
- `initial_delay_seconds` (Number) InitialDelaySeconds is the number of seconds to wait before performing the first check.
- `period_seconds` (Number) PeriodSeconds is the number of seconds between checks.


<a id="nestedatt--termination_configuration"></a>
### Nested Schema for `termination_configuration`

Optional:

- `grace_period_seconds` (Number) GracePeriodSeconds is the duration in seconds the game server needs to terminate gracefully.
- `maintenance_seconds` (Number) The duration in seconds the game server needs to terminate gracefully when put into maintenance.
- `spec_change_seconds` (Number) The duration in seconds the game server needs to terminate gracefully after Vessel specs have changed.
- `user_initiated_seconds` (Number) The duration in seconds the game server needs to terminate gracefully after a user has initiated a termination.


<a id="nestedatt--volumes"></a>
### Nested Schema for `volumes`

Required:

- `name` (String) Name is the name of the volume.

Optional:

- `empty_dir` (Attributes) EmptyDir represents a volume that is initially empty. (see [below for nested schema](#nestedatt--volumes--empty_dir))
- `persistent` (Attributes) Persistent represents a volume with data persistence. (see [below for nested schema](#nestedatt--volumes--persistent))

<a id="nestedatt--volumes--empty_dir"></a>
### Nested Schema for `volumes.empty_dir`

Optional:

- `size_limit` (String) SizeLimit is the total amount of local storage required for this EmptyDir volume.


<a id="nestedatt--volumes--persistent"></a>
### Nested Schema for `volumes.persistent`

Optional:

- `volume_name` (String) VolumeName is the name of the persistent volume.



<a id="nestedatt--image_updater_target"></a>
### Nested Schema for `image_updater_target`

Read-Only:

- `environment` (String) Environment is the environment of the image updater target.
- `name` (String) Name is the name of the image updater target.
- `type` (String) Type is the type of the image updater target.

## Import

Import is supported using the following syntax:

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  id = "{{ environment }}/{{ name }}"
  to = gamefabric_vessel.my_server
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
terraform import gamefabric_vessel.my_server "{{ environment }}/{{ name }}"
```