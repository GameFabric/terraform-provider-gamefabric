---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "gamefabric_branch Resource - terraform-provider-gamefabric"
subcategory: ""
description: |-
  
---

# gamefabric_branch (Resource)



## Example Usage

```terraform
# Create a simple branch with minimal configuration.
resource "gamefabric_branch" "main" {
  name         = "main"                # Required: Unique identifier.
  display_name = "Main Branch"         # Required: User-friendly display name for the branch.
}

# Create a branch with labels for organization.
# Labels are key-value pairs that help categorize and filter branches.
resource "gamefabric_branch" "develop" {
  name         = "develop"
  display_name = "Development Branch"
  description  = "Development and testing branch"
  
  labels = {
    environment = "development"
    team        = "platform"
    managed_by  = "terraform"
  }
  retention_policy_rules = []
}

# Create a branch with retention policies.
# Retention policies control how long container images and tags are kept.
# If keep_count and keep_days are both specified, the policy retains images that meet either condition.
resource "gamefabric_branch" "feature" {
  name         = "feature"
  display_name = "Feature Branch"
  description  = "Feature development branch with image retention policies"

  labels = {
    environment = "development"
    branch_type = "feature"
  }

  # Define retention policy rules for managing image lifecycle.
  # Multiple rules can be specified to handle different image patterns.
  retention_policy_rules = [
    {
      name        = "keep-latest-releases"         # Required: Name of the retention policy rule.
      image_regex = ".*"                           # Optional: Regex to match image names. Empty or ".*" matches all.
      tag_regex   = "^v[0-9]+\\.[0-9]+\\.[0-9]+$"  # Optional: Regex to match tag names (e.g., semantic versions).
      keep_count  = 10                             # Optional: Minimum number of matching tags to retain per image.
      keep_days   = 90                             # Optional: Minimum number of days to keep matching tags.
    },
    {
      name       = "keep-snapshot-builds"
      image_regex = ".*"
      tag_regex   = "^snapshot-.*"
      keep_count  = 5   # Keep at least 5 snapshot builds, and
      keep_days   = 30  # Keep snapshots for at least 30 days
    },
    {
      name       = "delete-old-pr-builds"
      image_regex = ".*"
      tag_regex   = "^pr-[0-9]+-.*"
      keep_count  = 3   # Only keep last 3 PR builds per image,
      keep_days   = 7   # Delete PR builds older than 7 days
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `retention_policy_rules` (Attributes List) RetentionPolicyRules are the rules that define how images are retained. (see [below for nested schema](#nestedatt--retention_policy_rules))

### Optional

- `annotations` (Map of String) Annotations is an unstructured map of keys and values stored on an object.
- `description` (String) Description is the optional description of the branch.
- `display_name` (String) DisplayName is the display name of the branch.
- `labels` (Map of String) A map of keys and values that can be used to organize and categorize objects.
- `name` (String) The unique object name within its scope.

### Read-Only

- `id` (String) The unique Terraform identifier.

<a id="nestedatt--retention_policy_rules"></a>
### Nested Schema for `retention_policy_rules`

Required:

- `name` (String) Name is the name of the image retention policy.

Optional:

- `image_regex` (String) ImageRegex is the optional regex selector for images that this policy applies to.
- `keep_count` (Number) KeepCount is the minimum number of tags to keep per image.
- `keep_days` (Number) KeepDays is the minimum number of days an image tag must be kept for.
- `tag_regex` (String) TagRegex is the optional regex selector for tags that this policy applies to.

## Import

Import is supported using the following syntax:

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  id = "{{name}}"
  to = gamefabric_branch.main
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
terraform import gamefabric_branch.main "{{ name }}"
```
